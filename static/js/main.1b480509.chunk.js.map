{"version":3,"sources":["components/ImageGallery/ImageGalleryItem/ImageGalleryItem.module.scss","components/Modal/Modal.module.scss","components/Container/Container.module.scss","components/LoaderSpinner/LoaderSpinner.module.scss","components/ImageGallery/Button/Button.module.scss","components/ImageGallery/ImageGallery.module.scss","App.module.scss","components/Searchbar/Searchbar.js","components/Container/Container.js","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.js","components/LoaderSpinner/LoaderSpinner.js","components/ImageGallery/Button/Button.js","components/Modal/Modal.js","utils/apiService.js","components/ImageGallery/ImageGallery.js","App.js","index.js","components/Searchbar/Searchbar.module.scss"],"names":["module","exports","Searchbar","state","searchQuery","onInputChange","e","target","name","value","setState","toLowerCase","onSubmit","preventDefault","trim","toast","error","props","this","className","styles","SearchForm","type","SearchFormButton","SearchFormButtonLabel","onChange","SearchFormInput","autoComplete","autoFocus","placeholder","Component","Container","children","container","ImageGalleryItem","webformatURL","id","onImgClick","alt","onClick","src","ImageGalleryItemImage","LoaderSpinner","color","height","width","Button","onBtnLoadMoreClick","button","modalRoot","document","querySelector","Modal","handleKeyDown","code","closeModal","handleBackdropClick","event","currentTarget","window","addEventListener","body","style","overflow","removeEventListener","createPortal","overlay","modal","api","page","fetchArticles","url","fetch","response","json","data","totalHits","Promise","reject","incrementPage","setQuery","resetPage","ImageGallery","imgArr","imgInModal","pending","saveImages","img","find","largeImageURL","prevProps","prevState","prevQuery","nextQuery","prevImgArr","nextImgArr","length","scrollTo","top","documentElement","scrollHeight","behavior","setTimeout","then","hits","catch","finally","map","tags","App","onAddQuery","appContainer","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1b480509.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__287-y\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__1vZAi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2BD1H\",\"modal\":\"Modal_modal__1NiY0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__1Vn6W\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LoaderSpinner_container__23llQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2z6GA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__GhrIT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appContainer\":\"App_appContainer__e_KSK\"};","import { Component } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport styles from './Searchbar.module.scss';\r\n\r\nclass Searchbar extends Component {\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n  };\r\n\r\n  state = { searchQuery: '' };\r\n\r\n  onInputChange = e => {\r\n    const { name, value } = e.target;\r\n    this.setState({ [name]: value.toLowerCase() });\r\n  };\r\n\r\n  onSubmit = e => {\r\n    e.preventDefault();\r\n    if (this.state.searchQuery.trim() === '') {\r\n      return toast.error('Please enter query');\r\n    }\r\n    this.props.onSubmit(this.state);\r\n    this.setState({ searchQuery: '' });\r\n  };\r\n\r\n  render() {\r\n    const { searchQuery } = this.state;\r\n    return (\r\n      <header className={styles.Searchbar}>\r\n        <form onSubmit={this.onSubmit} className={styles.SearchForm}>\r\n          <button type=\"submit\" className={styles.SearchFormButton}>\r\n            <span className={styles.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n          <input\r\n            onChange={this.onInputChange}\r\n            value={searchQuery}\r\n            className={styles.SearchFormInput}\r\n            name=\"searchQuery\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","import PropTypes from 'prop-types';\nimport styles from './Container.module.scss';\n\nconst Container = ({ children }) => (\n  <div className={styles.container}>{children}</div>\n);\n\nContainer.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default Container;\n","import PropTypes from 'prop-types';\r\n\r\nimport styles from './ImageGalleryItem.module.scss';\r\n\r\nconst ImageGalleryItem = ({ webformatURL, id, onImgClick, alt }) => {\r\n  return (\r\n    <li className={styles.ImageGalleryItem} onClick={() => onImgClick(id)}>\r\n      <img\r\n        src={webformatURL}\r\n        alt={alt}\r\n        className={styles.ImageGalleryItemImage}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  webformatURL: PropTypes.string.isRequired,\r\n  alt: PropTypes.string.isRequired,\r\n  id: PropTypes.number.isRequired,\r\n  onImgClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import Loader from 'react-loader-spinner';\r\n\r\nimport styles from './LoaderSpinner.module.scss';\r\n\r\nconst LoaderSpinner = () => {\r\n  return (\r\n    <div className={styles.container}>\r\n      <Loader type=\"ThreeDots\" color=\"#6e7b80\" height={80} width={80} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoaderSpinner;\r\n","import styles from './Button.module.scss';\r\n\r\nconst Button = ({ onBtnLoadMoreClick }) => {\r\n  return (\r\n    <button\r\n      onClick={onBtnLoadMoreClick}\r\n      type=\"button\"\r\n      className={styles.button}\r\n    >\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport styles from './Modal.module.scss';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n  static propTypes = {\r\n    closeModal: PropTypes.func.isRequired,\r\n    children: PropTypes.node.isRequired,\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n    document.body.style.overflow = 'hidden';\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n    document.body.style.overflow = 'auto';\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.closeModal();\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = event => {\r\n    if (event.currentTarget === event.target) {\r\n      this.props.closeModal();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div onClick={this.handleBackdropClick} className={styles.overlay}>\r\n        <div className={styles.modal}>{this.props.children}</div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","const apiUrl = 'https://pixabay.com/api/';\r\nconst apiKey = '22632103-559b096d748294a4f3f26d1f6';\r\nconst restApiQuery = '&image_type=photo&orientation=horizontal&per_page=12';\r\n\r\nconst api = {\r\n  searchQuery: '',\r\n  page: 1,\r\n\r\n  async fetchArticles() {\r\n    const url = `${apiUrl}?q=${this.searchQuery}&page=${this.page}&key=${apiKey}${restApiQuery}`;\r\n\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n    if (!data.totalHits) {\r\n      return Promise.reject(\r\n        `On your query \"${this.searchQuery}\" nothing matches found. `,\r\n      );\r\n    }\r\n    this.incrementPage();\r\n    return data;\r\n  },\r\n\r\n  setQuery(value) {\r\n    this.searchQuery = value;\r\n  },\r\n\r\n  incrementPage() {\r\n    this.page += 1;\r\n  },\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  },\r\n};\r\n\r\nexport default api;\r\n","import { Component } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Container from '../Container';\r\nimport ImageGalleryItem from './ImageGalleryItem';\r\nimport LoaderSpinner from '../LoaderSpinner';\r\nimport Button from './Button/Button';\r\nimport Modal from '../Modal/Modal';\r\n\r\nimport api from '../../utils/apiService';\r\n\r\nimport styles from './ImageGallery.module.scss';\r\n\r\nclass ImageGallery extends Component {\r\n  static propTypes = {\r\n    searchQuery: PropTypes.string,\r\n  };\r\n\r\n  state = {\r\n    imgArr: [],\r\n    imgInModal: '',\r\n    pending: false,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevQuery = prevProps.searchQuery;\r\n    const nextQuery = this.props.searchQuery;\r\n\r\n    if (prevQuery !== nextQuery) {\r\n      this.setState({ imgArr: [] });\r\n      api.setQuery(nextQuery);\r\n      api.resetPage();\r\n      this.saveImages();\r\n    }\r\n\r\n    const prevImgArr = prevState.imgArr;\r\n    const nextImgArr = this.state.imgArr;\r\n\r\n    if (prevImgArr.length && prevImgArr !== nextImgArr) {\r\n      window.scrollTo({\r\n        top: document.documentElement.scrollHeight,\r\n        behavior: 'smooth',\r\n      });\r\n    }\r\n  }\r\n\r\n  closeModal = () => {\r\n    this.setState({ imgInModal: '' });\r\n  };\r\n\r\n  onBtnLoadMoreClick = () => {\r\n    api.incrementPage();\r\n    this.saveImages();\r\n  };\r\n\r\n  onImgClick = id => {\r\n    const { imgArr } = this.state;\r\n    const img = imgArr.find(e => e.id === id).largeImageURL;\r\n    this.setState({ imgInModal: img });\r\n  };\r\n\r\n  saveImages() {\r\n    this.setState({ pending: true });\r\n\r\n    setTimeout(() => {\r\n      api\r\n        .fetchArticles()\r\n        .then(({ hits }) =>\r\n          this.setState(({ imgArr }) => ({\r\n            imgArr: [...imgArr, ...hits],\r\n          })),\r\n        )\r\n        .catch(error => toast.error(`${error}`))\r\n        .finally(this.setState({ pending: false }));\r\n    }, 1000);\r\n  }\r\n\r\n  render() {\r\n    const { imgArr, imgInModal, pending } = this.state;\r\n\r\n    return (\r\n      <>\r\n        <Container>\r\n          <ul className={styles.ImageGallery}>\r\n            {imgArr.map(({ id, webformatURL, tags }) => (\r\n              <ImageGalleryItem\r\n                webformatURL={webformatURL}\r\n                alt={tags}\r\n                key={id}\r\n                id={id}\r\n                onImgClick={this.onImgClick}\r\n              />\r\n            ))}\r\n          </ul>\r\n        </Container>\r\n\r\n        {!!imgArr.length && !pending && (\r\n          <Button onBtnLoadMoreClick={this.onBtnLoadMoreClick} />\r\n        )}\r\n\r\n        {pending && <LoaderSpinner />}\r\n\r\n        {imgInModal && (\r\n          <Modal closeModal={this.closeModal}>\r\n            <img src={imgInModal} alt=\"large pic in modal\" />\r\n          </Modal>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageGallery;\r\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\n\nimport styles from './App.module.scss';\nimport 'react-toastify/dist/ReactToastify.css';\n\nclass App extends Component {\n  state = { searchQuery: '' };\n\n  onAddQuery = ({ searchQuery }) => {\n    this.setState({ searchQuery });\n  };\n\n  render() {\n    const { searchQuery } = this.state;\n    return (\n      <div className={styles.appContainer}>\n        <Searchbar onSubmit={this.onAddQuery} />\n        <ImageGallery searchQuery={searchQuery} />\n        <ToastContainer autoClose={3000} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport './styles.scss';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2r5-b\",\"SearchForm\":\"Searchbar_SearchForm__2dmbt\",\"SearchFormButton\":\"Searchbar_SearchFormButton__3JjHW\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__1IeAl\",\"SearchFormInput\":\"Searchbar_SearchFormInput__2UUy5\"};"],"sourceRoot":""}