(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__287-y",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__1vZAi"}},12:function(e,t,a){e.exports={overlay:"Modal_overlay__2BD1H",modal:"Modal_modal__1NiY0"}},16:function(e,t,a){e.exports={container:"Container_container__1Vn6W"}},18:function(e,t,a){e.exports={container:"LoaderSpinner_container__23llQ"}},19:function(e,t,a){e.exports={button:"Button_button__2z6GA"}},21:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__GhrIT"}},22:function(e,t,a){e.exports={appContainer:"App_appContainer__e_KSK"}},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),i=a(3),s=a(4),l=a(6),u=a(5),h=a(8),m=a(15),d=a(9),p=a.n(d),b=a(1),j=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:""},e.onInputChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(m.a)({},n,r.toLowerCase()))},e.onSubmit=function(t){if(t.preventDefault(),""===e.state.searchQuery.trim())return h.b.error("please enter query");e.props.onSubmit(e.state),e.setState({searchQuery:""})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state.searchQuery;return Object(b.jsx)("header",{className:p.a.Searchbar,children:Object(b.jsxs)("form",{onSubmit:this.onSubmit,className:p.a.SearchForm,children:[Object(b.jsx)("button",{type:"submit",className:p.a.SearchFormButton,children:Object(b.jsx)("span",{className:p.a.SearchFormButtonLabel,children:"Search"})}),Object(b.jsx)("input",{onChange:this.onInputChange,value:e,className:p.a.SearchFormInput,name:"searchQuery",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),a}(n.Component),f=a(14),g=a(16),y=a.n(g),v=function(e){var t=e.children;return Object(b.jsx)("div",{className:y.a.container,children:t})},O=a(11),_=a.n(O),I=function(e){var t=e.webformatURL,a=e.id,n=e.onImgClick;return Object(b.jsx)("li",{className:_.a.ImageGalleryItem,onClick:function(){return n(a)},children:Object(b.jsx)("img",{src:t,alt:"",className:_.a.ImageGalleryItemImage})})},x=a(17),S=a.n(x),k=a(18),w=a.n(k),C=function(){return Object(b.jsx)("div",{className:w.a.container,children:Object(b.jsx)(S.a,{type:"ThreeDots",color:"#6e7b80",height:80,width:80})})},A=a(19),Q=a.n(A),M=function(e){var t=e.onBtnLoadMoreClick;return Object(b.jsx)("button",{onClick:t,type:"button",className:Q.a.button,children:"Load more"})},L=a(12),B=a.n(L),N=document.querySelector("#modal-root"),F=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.closeModal()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.closeModal()},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown),document.body.style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown),document.body.style.overflow="auto"}},{key:"render",value:function(){return Object(c.createPortal)(Object(b.jsx)("div",{onClick:this.handleBackdropClick,className:B.a.overlay,children:Object(b.jsx)("div",{className:B.a.modal,children:this.props.children})}),N)}}]),a}(n.Component),G=a(13),D=a.n(G),U=a(20),P={searchQuery:"",page:1,fetchArticles:function(){var e=this;return Object(U.a)(D.a.mark((function t(){var a,n,r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat("https://pixabay.com/api/","?q=").concat(e.searchQuery,"&page=").concat(e.page,"&key=").concat("22632103-559b096d748294a4f3f26d1f6").concat("&image_type=photo&orientation=horizontal&per_page=12"),t.next=3,fetch(a);case 3:return n=t.sent,t.next=6,n.json();case 6:if((r=t.sent).totalHits){t.next=9;break}return t.abrupt("return",Promise.reject('On your query "'.concat(e.searchQuery,'" nothing matches found. ')));case 9:return e.incrementPage(),t.abrupt("return",r);case 11:case"end":return t.stop()}}),t)})))()},incrementPage:function(){this.page+=1},resetPage:function(){this.page=1}},E=a(21),K=a.n(E),q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={imgArr:[],imgInModal:"",pending:!1},e.closeModal=function(){e.setState({imgInModal:""})},e.onBtnLoadMoreClick=function(){P.incrementPage(),e.saveImages()},e.onImgClick=function(t){var a=e.state.imgArr.find((function(e){return e.id===t})).largeImageURL;e.setState({imgInModal:a})},e}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=e.searchQuery,n=this.props.searchQuery;a!==n&&(this.setState({imgArr:[]}),P.searchQuery=n,P.resetPage(),this.saveImages());var r=t.imgArr,c=this.state.imgArr;r.length&&r!==c&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"saveImages",value:function(){var e=this;this.setState({pending:!0}),P.fetchArticles().then((function(t){var a=t.hits;return e.setState((function(e){var t=e.imgArr;return{imgArr:[].concat(Object(f.a)(t),Object(f.a)(a))}}))})).catch((function(e){return h.b.error("".concat(e))})).finally(this.setState({pending:!1}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.imgArr,n=t.imgInModal,r=t.pending;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(v,{children:Object(b.jsx)("ul",{className:K.a.ImageGallery,children:a.map((function(t){var a=t.id,n=t.webformatURL;return Object(b.jsx)(I,{webformatURL:n,id:a,onImgClick:e.onImgClick},a)}))})}),a.length&&!r?Object(b.jsx)(M,{onBtnLoadMoreClick:this.onBtnLoadMoreClick}):"",r&&Object(b.jsx)(C,{}),n&&Object(b.jsx)(F,{closeModal:this.closeModal,children:Object(b.jsx)("img",{src:n,alt:""})})]})}}]),a}(n.Component),H=a(22),R=a.n(H),T=(a(49),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:""},e.onAddQuery=function(t){var a=t.searchQuery;e.setState({searchQuery:a})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state.searchQuery;return Object(b.jsxs)("div",{className:R.a.appContainer,children:[Object(b.jsx)(j,{onSubmit:this.onAddQuery}),Object(b.jsx)(q,{searchQuery:e}),Object(b.jsx)(h.a,{autoClose:3e3})]})}}]),a}(n.Component));a(50);o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(T,{})}),document.getElementById("root"))},9:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__2r5-b",SearchForm:"Searchbar_SearchForm__2dmbt",SearchFormButton:"Searchbar_SearchFormButton__3JjHW",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__1IeAl",SearchFormInput:"Searchbar_SearchFormInput__2UUy5"}}},[[51,1,2]]]);
//# sourceMappingURL=main.79de21b4.chunk.js.map